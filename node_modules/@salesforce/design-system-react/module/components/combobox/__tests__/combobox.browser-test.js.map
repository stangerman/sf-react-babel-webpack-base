{"version":3,"sources":["../../../../.tmp-es/components/combobox/__tests__/combobox.browser-test.jsx"],"names":["React","PropTypes","chai","expect","chaiEnzyme","mount","assign","createMountNode","destroyMountNode","Combobox","Icon","filter","KEYS","keyObjects","LETTERKEYS","letterKeyObjects","IconSettings","use","accounts","id","label","subTitle","type","accountsWithIcon","map","elem","icon","defaultProps","labels","placeholder","menuPosition","onOpen","propTypes","componentWillUpdate","func","initialSelection","array","DemoComponent","props","state","inputValue","selection","nextProps","nextState","onChange","event","value","setState","onRequestRemoveSelectedOption","data","console","log","onSubmit","onSelect","options","Component","displayName","getNodes","wrapper","combobox","find","input","menuListbox","removeSingleItem","selectedListbox","describe","mountNode","beforeEach","context","afterEach","it","attachTo","nodes","node","getAttribute","to","equal","simulate","target","DOWN","firstChild","ENTER","text","done","getSelectedListboxPills","index","children","at","childAt","getFocusedPillLabel","document","activeElement","querySelector","innerText","selectionKeyedStates","removeInitialFirstPill","removeThirdInitialItem","removesLastAndInitialFifthPill","removeInitalSecondAndFourthPill","allPillsRemoved","selectionIndexedStates","Object","keys","key","counter","prevState","have","members","TAB","DELETE","RIGHT","LEFT","A","be","an","onOpenCallback","sinon","spy","callCount"],"mappings":"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","sourcesContent":["// Import your external dependencies\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport chai, { expect } from 'chai';\nimport chaiEnzyme from 'chai-enzyme';\nimport { mount } from 'enzyme';\nimport assign from 'lodash.assign';\n\n/* Enzyme Helpers that can mount and unmount React component instances to\n * the DOM and set `this.wrapper` and `this.dom` within Mocha's `this`\n * context [full source here](tests/enzyme-helpers.js). `this` can\n * only be referenced if inside `function () {}`.\n */\nimport {\n\tcreateMountNode,\n\tdestroyMountNode,\n} from '../../../tests/enzyme-helpers';\n\n// Import your internal dependencies (for example):\nimport Combobox from '../../../components/combobox';\nimport Icon from '../../../components/icon';\nimport filter from '../../../components/combobox/filter';\nimport KEYS, { keyObjects } from '../../../utilities/key-code';\nimport LETTERKEYS, {\n\tkeyObjects as letterKeyObjects,\n} from '../../../utilities/letter-key-code';\nimport IconSettings from '../../../components/icon-settings';\n\n/* Set Chai to use chaiEnzyme for enzyme compatible assertions:\n * https://github.com/producthunt/chai-enzyme\n */\nchai.use(chaiEnzyme());\n\nconst accounts = [\n\t{\n\t\tid: '1',\n\t\tlabel: 'Acme',\n\t\tsubTitle: 'Account • San Francisco',\n\t\ttype: 'account',\n\t},\n\t{\n\t\tid: '2',\n\t\tlabel: 'Salesforce.com, Inc.',\n\t\tsubTitle: 'Account • San Francisco',\n\t\ttype: 'account',\n\t},\n\t{\n\t\tid: '3',\n\t\tlabel: \"Paddy's Pub\",\n\t\tsubTitle: 'Account • Boston, MA',\n\t\ttype: 'account',\n\t},\n\t{\n\t\tid: '4',\n\t\tlabel: 'Tyrell Corp',\n\t\tsubTitle: 'Account • San Francisco, CA',\n\t\ttype: 'account',\n\t},\n\t{\n\t\tid: '5',\n\t\tlabel: 'Paper St. Soap Company',\n\t\tsubTitle: 'Account • Beloit, WI',\n\t\ttype: 'account',\n\t},\n\t{\n\t\tid: '6',\n\t\tlabel: 'Nakatomi Investments',\n\t\tsubTitle: 'Account • Chicago, IL',\n\t\ttype: 'account',\n\t},\n\t{ id: '7', label: 'Acme Landscaping', type: 'account' },\n\t{\n\t\tid: '8',\n\t\tlabel: 'Acme Construction',\n\t\tsubTitle: 'Account • Grand Marais, MN',\n\t\ttype: 'account',\n\t},\n];\n\nconst accountsWithIcon = accounts.map((elem) =>\n\tassign(elem, {\n\t\ticon: (\n\t\t\t<Icon\n\t\t\t\tassistiveText={{ label: 'Account' }}\n\t\t\t\tcategory=\"standard\"\n\t\t\t\tname={elem.type}\n\t\t\t/>\n\t\t),\n\t})\n);\n\nconst defaultProps = {\n\tid: 'combobox-unique-id',\n\tlabels: {\n\t\tlabel: 'Search',\n\t\tplaceholder: 'Search Salesforce',\n\t},\n\tmenuPosition: 'relative',\n\tonOpen: () => {},\n};\n\nconst propTypes = {\n\tcomponentWillUpdate: PropTypes.func,\n\tinitialSelection: PropTypes.array,\n};\n\n/* A re-usable demo component fixture outside of `describe` sections\n * can accept props within each test and be unmounted after each tests.\n * This wrapping component will be similar to your wrapping component\n * you will create in the React Storybook for manual testing.\n */\nclass DemoComponent extends React.Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tinputValue: '',\n\t\t\tselection: this.props.initialSelection || [],\n\t\t};\n\t}\n\n\tcomponentWillUpdate (nextProps, nextState) {\n\t\tif (this.props.componentWillUpdate) {\n\t\t\tthis.props.componentWillUpdate(nextState);\n\t\t}\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<IconSettings iconPath=\"/assets/icons\">\n\t\t\t\t<Combobox\n\t\t\t\t\tevents={{\n\t\t\t\t\t\tonChange: (event, { value }) => {\n\t\t\t\t\t\t\tthis.setState({ inputValue: value });\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonRequestRemoveSelectedOption: (event, data) => {\n\t\t\t\t\t\t\tconsole.log(data);\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tinputValue: '',\n\t\t\t\t\t\t\t\tselection: data.selection,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSubmit: (event, { value }) => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tinputValue: '',\n\t\t\t\t\t\t\t\tselection: [\n\t\t\t\t\t\t\t\t\t...this.state.selection,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlabel: value,\n\t\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\tassistiveText=\"Account\"\n\t\t\t\t\t\t\t\t\t\t\t\tcategory=\"standard\"\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"account\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSelect: (event, data) => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tinputValue: '',\n\t\t\t\t\t\t\t\tselection: data.selection,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonOpen: (event) => {\n\t\t\t\t\t\t\tthis.props.onOpen();\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\toptions={filter({\n\t\t\t\t\t\tinputValue: this.state.inputValue,\n\t\t\t\t\t\toptions: accountsWithIcon,\n\t\t\t\t\t\tselection: this.state.selection,\n\t\t\t\t\t})}\n\t\t\t\t\tselection={this.state.selection}\n\t\t\t\t\tvalue={this.state.inputValue}\n\t\t\t\t\t{...this.props}\n\t\t\t\t/>\n\t\t\t</IconSettings>\n\t\t);\n\t}\n}\n\nDemoComponent.displayName = 'ComboboxDemoComponent';\nDemoComponent.propTypes = propTypes;\nDemoComponent.defaultProps = defaultProps;\n\nconst getNodes = ({ wrapper }) => ({\n\tcombobox: wrapper.find('.slds-combobox'),\n\tinput: wrapper.find('.slds-combobox input'),\n\tmenuListbox: wrapper.find('.slds-combobox .slds-listbox.slds-dropdown'),\n\tremoveSingleItem: wrapper.find('.slds-combobox .slds-input__icon'),\n\tselectedListbox: wrapper.find(\n\t\t`#${defaultProps.id}-selected-listbox .slds-listbox`\n\t),\n});\n\n/* All tests for component being tested should be wrapped in a root `describe`,\n * which should be named after the component being tested.\n * When read aloud, the cumulative `describe` and `it` names should form a coherent\n * sentence, eg \"Date Picker default structure and css is present with expected\n * attributes set\". If you are having trouble constructing a cumulative short\n * sentence, this may be an indicator that your test is poorly structured.\n * String provided as first parameter names the `describe` section. Limit to nouns\n * as much as possible/appropriate.`\n */\ndescribe('SLDSCombobox', function () {\n\tlet mountNode;\n\tlet wrapper;\n\n\tdescribe('Assistive technology and keyboard interactions', () => {\n\t\t/* Detect if presence of accessibility features such as ARIA\n\t\t * roles and screen reader text is present in the DOM.\n\t\t */\n\t\tbeforeEach(() => {\n\t\t\tmountNode = createMountNode({ context: this });\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\tdestroyMountNode({ wrapper, mountNode });\n\t\t});\n\n\t\tit('has aria-haspopup, aria-expanded is false when closed, aria-expanded is true when open', function () {\n\t\t\twrapper = mount(<DemoComponent multiple />, { attachTo: mountNode });\n\t\t\tconst nodes = getNodes({ wrapper });\n\t\t\texpect(nodes.combobox.node.getAttribute('aria-haspopup')).to.equal(\n\t\t\t\t'listbox'\n\t\t\t);\n\t\t\t// closed\n\t\t\texpect(nodes.combobox.node.getAttribute('aria-expanded')).to.equal(\n\t\t\t\t'false'\n\t\t\t);\n\t\t\t// open\n\t\t\tnodes.input.simulate('click', {});\n\t\t\texpect(nodes.combobox.node.getAttribute('aria-expanded')).to.equal(\n\t\t\t\t'true'\n\t\t\t);\n\t\t});\n\n\t\tit('menu filters to second item, menu listbox menu item 2 aria-selected is true, input activedescendent has item 2 id, after pressing down arrow, enter selects item 2', function () {\n\t\t\twrapper = mount(<DemoComponent multiple isOpen />, {\n\t\t\t\tattachTo: mountNode,\n\t\t\t});\n\t\t\tlet nodes = getNodes({ wrapper });\n\t\t\tnodes.input.simulate('focus');\n\t\t\tnodes.input.simulate('change', { target: { value: accounts[1].label } });\n\t\t\tnodes.input.simulate('keyDown', keyObjects.DOWN);\n\t\t\texpect(\n\t\t\t\tnodes.menuListbox.node.firstChild.firstChild.getAttribute(\n\t\t\t\t\t'aria-selected'\n\t\t\t\t)\n\t\t\t).to.equal('true');\n\t\t\texpect(nodes.input.node.getAttribute('aria-activedescendant')).to.equal(\n\t\t\t\t`${defaultProps.id}-listbox-option-2`\n\t\t\t);\n\t\t\t// select\n\t\t\tnodes.input.simulate('keyDown', keyObjects.ENTER);\n\t\t\tnodes = getNodes({ wrapper });\n\t\t\texpect(nodes.input.node.getAttribute('value')).to.equal('');\n\t\t\texpect(nodes.selectedListbox.find('.slds-pill__label').text()).to.equal(\n\t\t\t\taccounts[1].label\n\t\t\t);\n\t\t});\n\n\t\tit('Selected Listbox: remove initial first pill, remove third initial item, cycles focus (first to last), removes last and initial fifth pill, cycles focus (last to first), remove inital second and fourth pill', function (done) {\n\t\t\tconst getSelectedListboxPills = ({ nodes, index }) =>\n\t\t\t\tnodes.selectedListbox\n\t\t\t\t\t.children()\n\t\t\t\t\t.at(index)\n\t\t\t\t\t.childAt(0);\n\t\t\tconst getFocusedPillLabel = () =>\n\t\t\t\tdocument.activeElement.querySelector('.slds-pill__label').innerText;\n\t\t\tconst selectionKeyedStates = {\n\t\t\t\tremoveInitialFirstPill: [\n\t\t\t\t\taccountsWithIcon[1],\n\t\t\t\t\taccountsWithIcon[2],\n\t\t\t\t\taccountsWithIcon[3],\n\t\t\t\t\taccountsWithIcon[4],\n\t\t\t\t],\n\t\t\t\tremoveThirdInitialItem: [\n\t\t\t\t\taccountsWithIcon[1],\n\t\t\t\t\taccountsWithIcon[3],\n\t\t\t\t\taccountsWithIcon[4],\n\t\t\t\t],\n\t\t\t\tremovesLastAndInitialFifthPill: [\n\t\t\t\t\taccountsWithIcon[1],\n\t\t\t\t\taccountsWithIcon[3],\n\t\t\t\t],\n\t\t\t\tremoveInitalSecondAndFourthPill: [accountsWithIcon[3]],\n\t\t\t\tallPillsRemoved: [],\n\t\t\t};\n\t\t\tconst selectionIndexedStates = Object.keys(selectionKeyedStates).map(\n\t\t\t\t(key, index) => selectionKeyedStates[key]\n\t\t\t);\n\n\t\t\tlet counter = 0;\n\t\t\twrapper = mount(\n\t\t\t\t<DemoComponent\n\t\t\t\t\tcomponentWillUpdate={(prevState) => {\n\t\t\t\t\t\texpect(prevState.selection).to.have.members(\n\t\t\t\t\t\t\tselectionIndexedStates[counter]\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (counter === 4) {\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcounter += 1;\n\t\t\t\t\t}}\n\t\t\t\t\tinitialSelection={[\n\t\t\t\t\t\taccounts[0],\n\t\t\t\t\t\taccounts[1],\n\t\t\t\t\t\taccounts[2],\n\t\t\t\t\t\taccounts[3],\n\t\t\t\t\t\taccounts[4],\n\t\t\t\t\t]}\n\t\t\t\t\tmultiple\n\t\t\t\t/>,\n\t\t\t\t{ attachTo: mountNode }\n\t\t\t);\n\t\t\tconst nodes = getNodes({ wrapper });\n\t\t\tnodes.input.simulate('focus');\n\t\t\tnodes.input.simulate('keyDown', keyObjects.TAB);\n\t\t\tgetSelectedListboxPills({ nodes, index: 0 }).simulate(\n\t\t\t\t'keyDown',\n\t\t\t\tkeyObjects.DELETE\n\t\t\t);\n\t\t\texpect(getFocusedPillLabel()).to.equal(accountsWithIcon[1].label);\n\t\t\tgetSelectedListboxPills({ nodes, index: 0 }).simulate(\n\t\t\t\t'keyDown',\n\t\t\t\tkeyObjects.RIGHT\n\t\t\t);\n\t\t\texpect(getFocusedPillLabel()).to.equal(accountsWithIcon[2].label);\n\t\t\tgetSelectedListboxPills({ nodes, index: 1 }).simulate(\n\t\t\t\t'keyDown',\n\t\t\t\tkeyObjects.DELETE\n\t\t\t);\n\t\t\texpect(getFocusedPillLabel()).to.equal(accountsWithIcon[3].label);\n\t\t\tgetSelectedListboxPills({ nodes, index: 1 }).simulate(\n\t\t\t\t'keyDown',\n\t\t\t\tkeyObjects.LEFT\n\t\t\t);\n\t\t\tgetSelectedListboxPills({ nodes, index: 0 }).simulate(\n\t\t\t\t'keyDown',\n\t\t\t\tkeyObjects.LEFT\n\t\t\t);\n\t\t\texpect(getFocusedPillLabel()).to.equal(accountsWithIcon[4].label);\n\t\t\tgetSelectedListboxPills({ nodes, index: 2 }).simulate(\n\t\t\t\t'keyDown',\n\t\t\t\tkeyObjects.DELETE\n\t\t\t);\n\t\t\texpect(getFocusedPillLabel()).to.equal(accountsWithIcon[3].label);\n\t\t\tgetSelectedListboxPills({ nodes, index: 1 }).simulate(\n\t\t\t\t'keyDown',\n\t\t\t\tkeyObjects.RIGHT\n\t\t\t);\n\t\t\texpect(getFocusedPillLabel()).to.equal(accountsWithIcon[1].label);\n\t\t\tgetSelectedListboxPills({ nodes, index: 0 }).simulate(\n\t\t\t\t'keyDown',\n\t\t\t\tkeyObjects.DELETE\n\t\t\t);\n\t\t\tgetSelectedListboxPills({ nodes, index: 0 }).simulate(\n\t\t\t\t'keydown',\n\t\t\t\tkeyObjects.DELETE\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('Variant-specific', () => {\n\t\tbeforeEach(() => {\n\t\t\tmountNode = createMountNode({ context: this });\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\tdestroyMountNode({ wrapper, mountNode });\n\t\t});\n\n\t\tit('Limit to pre-defined choices', function () {\n\t\t\twrapper = mount(<DemoComponent multiple predefinedOptionsOnly />, {\n\t\t\t\tattachTo: mountNode,\n\t\t\t});\n\t\t\tlet nodes = getNodes({ wrapper });\n\t\t\tnodes.input.simulate('focus');\n\t\t\tnodes.input.simulate('keyDown', letterKeyObjects.A);\n\t\t\tnodes.input.simulate('keyDown', keyObjects.ENTER);\n\t\t\tnodes = getNodes({ wrapper });\n\t\t\texpect(nodes.selectedListbox.node).to.be.an('undefined');\n\t\t});\n\n\t\tit('Inline Single Selection Remove selection', function () {\n\t\t\twrapper = mount(<DemoComponent variant=\"inline-listbox\" />, {\n\t\t\t\tattachTo: mountNode,\n\t\t\t});\n\t\t\tlet nodes = getNodes({ wrapper });\n\n\t\t\t// add selection\n\t\t\tnodes.input.simulate('focus');\n\t\t\tnodes.input.simulate('change', { target: { value: accounts[1].label } });\n\t\t\tnodes.input.simulate('keyDown', keyObjects.ENTER);\n\t\t\texpect(nodes.input.node.value).to.equal('Salesforce.com, Inc.');\n\t\t\tnodes = getNodes({ wrapper });\n\n\t\t\t// remove selection\n\t\t\tnodes.removeSingleItem.simulate('click');\n\t\t\tnodes = getNodes({ wrapper });\n\t\t\texpect(nodes.input.node.value).to.equal('');\n\t\t});\n\t});\n\n\tdescribe('Optional Props', () => {\n\t\tbeforeEach(() => {\n\t\t\tmountNode = createMountNode({ context: this });\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\tdestroyMountNode({ wrapper, mountNode });\n\t\t});\n\n\t\tit('Displays No match found', function () {\n\t\t\twrapper = mount(<DemoComponent isOpen />, { attachTo: mountNode });\n\t\t\tlet nodes = getNodes({ wrapper });\n\t\t\tnodes.input.simulate('focus');\n\t\t\tnodes.input.simulate('change', { target: { value: 'Random text' } });\n\t\t\t// nodes.input.simulate('keyDown', keyObjects.ENTER);\n\t\t\tnodes = getNodes({ wrapper });\n\t\t\texpect(\n\t\t\t\tnodes.menuListbox\n\t\t\t\t\t.find('.slds-listbox__item.slds-listbox__status')\n\t\t\t\t\t.text()\n\t\t\t).to.equal('No matches found.');\n\t\t});\n\t});\n\n\tdescribe('Input Onclick', () => {\n\t\tconst onOpenCallback = sinon.spy();\n\t\tbeforeEach(() => {\n\t\t\tmountNode = createMountNode({ context: this });\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\tdestroyMountNode({ wrapper, mountNode });\n\t\t});\n\n\t\tit('onOpen callback is called', function () {\n\t\t\twrapper = mount(<DemoComponent onOpen={onOpenCallback} />, {\n\t\t\t\tattachTo: mountNode,\n\t\t\t});\n\t\t\tconst nodes = getNodes({ wrapper });\n\t\t\tnodes.input.simulate('click', {});\n\t\t\texpect(onOpenCallback.callCount).to.equal(1);\n\t\t});\n\t});\n});\n"],"file":"combobox.browser-test.js"}