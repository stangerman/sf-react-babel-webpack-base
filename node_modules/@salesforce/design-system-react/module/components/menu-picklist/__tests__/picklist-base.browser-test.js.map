{"version":3,"sources":["../../../../.tmp-es/components/menu-picklist/__tests__/picklist-base.browser-test.jsx"],"names":["React","ReactDOM","assign","TestUtils","expect","SLDSMenuPicklist","IconSettings","Simulate","scryRenderedDOMComponentsWithTag","findRenderedDOMComponentWithClass","describe","body","options","label","value","title","renderPicklist","inst","document","createElement","appendChild","render","removePicklist","unmountComponentAtNode","removeChild","defaultProps","modal","placeholder","createPicklist","props","getPicklist","getMenu","dom","querySelector","clickOnItem","cmp","index","items","click","btn","beforeEach","afterEach","it","done","to","equal","setTimeout","className","include","clicked","onClick","getAttribute","textContent","be","false","true","selected","onSelect","i","querySelectorAll","disabled","ulRole","ulAria","anchorRole","match","keyDown","key","keyCode","which","not","menu","menuItems","multiple","listbox","childNodes","length"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-render-return-value */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport assign from 'lodash.assign';\nimport TestUtils from 'react-addons-test-utils';\nimport { expect } from 'chai';\n\nimport SLDSMenuPicklist from '../../menu-picklist';\nimport IconSettings from '../../icon-settings';\n\nconst {\n\tSimulate,\n\tscryRenderedDOMComponentsWithTag,\n\tfindRenderedDOMComponentWithClass,\n} = TestUtils;\n\ndescribe('SLDSMenuPicklist: ', function () {\n\tlet body;\n\n\tconst options = [\n\t\t{\n\t\t\tlabel: 'A Option Option Super Super Long',\n\t\t\tvalue: 'A0',\n\t\t\ttitle: 'Greg',\n\t\t},\n\t\t{\n\t\t\tlabel: 'B Option',\n\t\t\tvalue: 'B0',\n\t\t},\n\t];\n\n\tconst renderPicklist = (inst) => {\n\t\tbody = document.createElement('div');\n\t\tdocument.body.appendChild(body);\n\t\treturn ReactDOM.render(\n\t\t\t<IconSettings iconPath=\"/assets/icons\">{inst}</IconSettings>,\n\t\t\tbody\n\t\t);\n\t};\n\n\tfunction removePicklist () {\n\t\tReactDOM.unmountComponentAtNode(body);\n\t\tdocument.body.removeChild(body);\n\t}\n\n\tconst defaultProps = {\n\t\tmodal: false,\n\t\toptions,\n\t\tplaceholder: 'Select a contact',\n\t\tvalue: 'C0',\n\t};\n\n\tconst createPicklist = (props) =>\n\t\tReact.createElement(SLDSMenuPicklist, assign({}, defaultProps, props));\n\n\tconst getPicklist = (props) => renderPicklist(createPicklist(props));\n\tconst getMenu = (dom) => dom.querySelector('.slds-dropdown');\n\n\tconst clickOnItem = (cmp, index) => {\n\t\tconst items = scryRenderedDOMComponentsWithTag(cmp, 'a');\n\t\tSimulate.click(items[index]);\n\t};\n\n\tdescribe('in modal mode', () => {\n\t\tlet cmp;\n\t\tlet btn;\n\n\t\tbeforeEach(() => {\n\t\t\tcmp = getPicklist({ modal: true });\n\t\t\tbtn = findRenderedDOMComponentWithClass(cmp, 'slds-button');\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\tremovePicklist();\n\t\t});\n\n\t\tit('expands/contracts the dropdown on click', (done) => {\n\t\t\texpect(getMenu(document.body)).to.equal(null);\n\t\t\tSimulate.click(btn, {});\n\t\t\tsetTimeout(() => {\n\t\t\t\texpect(getMenu(document.body).className).to.include(\n\t\t\t\t\t'slds-dropdown--left'\n\t\t\t\t);\n\t\t\t\tSimulate.click(btn, {});\n\t\t\t\texpect(getMenu(document.body)).to.equal(null);\n\t\t\t\tdone();\n\t\t\t}, 600);\n\t\t});\n\t});\n\n\tdescribe('with click handler', () => {\n\t\tlet cmp;\n\t\tlet btn;\n\t\tlet clicked;\n\n\t\tbeforeEach(() => {\n\t\t\tclicked = false;\n\t\t\tcmp = getPicklist({\n\t\t\t\tonClick: () => {\n\t\t\t\t\tclicked = true;\n\t\t\t\t},\n\t\t\t});\n\t\t\tbtn = findRenderedDOMComponentWithClass(cmp, 'slds-button');\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\tremovePicklist();\n\t\t});\n\n\t\tit('gives the button correct aria properties', () => {\n\t\t\texpect(btn.getAttribute('aria-haspopup')).to.equal('true');\n\t\t});\n\n\t\tit('sets the placeholder', () => {\n\t\t\texpect(btn.textContent).to.equal('Select a contact');\n\t\t});\n\n\t\tit('expands/contracts the dropdown on click', () => {\n\t\t\texpect(getMenu(body)).to.equal(null);\n\t\t\tSimulate.click(btn, {});\n\t\t\texpect(getMenu(body).className).to.include('slds-dropdown');\n\t\t\tSimulate.click(btn, {});\n\t\t\texpect(getMenu(body)).to.equal(null);\n\t\t});\n\n\t\tit('preserves click behavior', () => {\n\t\t\texpect(clicked).to.be.false;\n\t\t\tSimulate.click(btn, {});\n\t\t\texpect(clicked).to.be.true;\n\t\t});\n\t});\n\n\tdescribe('expanded with onSelect', () => {\n\t\tlet cmp;\n\t\tlet btn;\n\t\tlet clicked;\n\t\tlet selected;\n\n\t\tbeforeEach(() => {\n\t\t\tselected = false;\n\t\t\tcmp = getPicklist({\n\t\t\t\tonSelect: (i) => {\n\t\t\t\t\tselected = i;\n\t\t\t\t},\n\t\t\t});\n\t\t\tbtn = findRenderedDOMComponentWithClass(cmp, 'slds-button');\n\t\t\tSimulate.click(btn, {});\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\tremovePicklist();\n\t\t});\n\n\t\tit('selects an item', () => {\n\t\t\texpect(selected).to.be.false;\n\t\t\tconst items = getMenu(body).querySelectorAll('.slds-dropdown__item');\n\t\t\tSimulate.click(items[1].querySelector('a'), {});\n\t\t\texpect(selected.value).to.equal('B0');\n\t\t});\n\t});\n\n\tdescribe('disabled', () => {\n\t\tlet cmp;\n\t\tlet btn;\n\t\tlet clicked;\n\n\t\tbeforeEach(() => {\n\t\t\tclicked = false;\n\t\t\tcmp = getPicklist({\n\t\t\t\tdisabled: true,\n\t\t\t\tonClick: () => {\n\t\t\t\t\tclicked = true;\n\t\t\t\t},\n\t\t\t});\n\t\t\tbtn = findRenderedDOMComponentWithClass(cmp, 'slds-button');\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\tremovePicklist();\n\t\t});\n\n\t\tit(\"doesn't open\", () => {\n\t\t\tSimulate.click(btn, {});\n\t\t\texpect(getMenu(body)).to.equal(null);\n\t\t});\n\n\t\tit('prevents click behavior', () => {\n\t\t\texpect(clicked).to.be.false;\n\t\t\tSimulate.click(btn, {});\n\t\t\texpect(clicked).to.be.false;\n\t\t});\n\t});\n\n\tdescribe('accessible markup', () => {\n\t\tlet cmp;\n\t\tlet btn;\n\t\tlet clicked;\n\t\tlet selected;\n\n\t\tbeforeEach(() => {\n\t\t\tselected = false;\n\t\t\tcmp = getPicklist({\n\t\t\t\tonSelect: (i) => {\n\t\t\t\t\tselected = i;\n\t\t\t\t},\n\t\t\t});\n\t\t\tbtn = findRenderedDOMComponentWithClass(cmp, 'slds-button');\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\tremovePicklist();\n\t\t});\n\n\t\tit('<ul> has role menu & aria-labelledby', () => {\n\t\t\tSimulate.click(btn, {});\n\t\t\tconst ulRole = getMenu(body)\n\t\t\t\t.querySelector('ul')\n\t\t\t\t.getAttribute('role');\n\t\t\tconst ulAria = getMenu(body)\n\t\t\t\t.querySelector('ul')\n\t\t\t\t.getAttribute('aria-labelledby');\n\t\t\texpect(ulRole).to.equal('menu');\n\t\t\texpect(ulAria).to.equal(btn.getAttribute('id'));\n\t\t});\n\n\t\tit('<a> inside <li> has role menuitem', () => {\n\t\t\tSimulate.click(btn, {});\n\t\t\tconst items = getMenu(body).querySelectorAll('.slds-dropdown__item a');\n\t\t\tconst anchorRole = items[1].getAttribute('role');\n\t\t\tconst match =\n\t\t\t\tanchorRole === 'menuitem' ||\n\t\t\t\tanchorRole === 'menuitemradio' ||\n\t\t\t\tanchorRole === 'menuitemcheckbox';\n\t\t\texpect(match).to.be.true;\n\t\t});\n\t});\n\n\tdescribe('Keyboard behavior', () => {\n\t\tlet cmp;\n\t\tlet btn;\n\t\tlet selected;\n\n\t\tbeforeEach(() => {\n\t\t\tselected = false;\n\t\t\tcmp = getPicklist({\n\t\t\t\tonSelect: (i) => {\n\t\t\t\t\tselected = i;\n\t\t\t\t},\n\t\t\t});\n\t\t\tbtn = findRenderedDOMComponentWithClass(cmp, 'slds-button');\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\tremovePicklist();\n\t\t});\n\n\t\tit('opens menu with enter', () => {\n\t\t\texpect(getMenu(body)).to.equal(null);\n\t\t\tSimulate.keyDown(btn, { key: 'Enter', keyCode: 13, which: 13 });\n\t\t\texpect(getMenu(body)).to.not.equal(null);\n\t\t});\n\n\t\tit('opens menu with down arrow key', () => {\n\t\t\texpect(getMenu(body)).to.equal(null);\n\t\t\tSimulate.keyDown(btn, { key: 'Down', keyCode: 40, which: 40 });\n\t\t\texpect(getMenu(body)).to.not.equal(null);\n\t\t});\n\n\t\tit('selects an item with keyboard', () => {\n\t\t\tSimulate.click(btn, {});\n\t\t\texpect(selected).to.be.false;\n\n\t\t\tconst menu = getMenu(body);\n\t\t\tSimulate.keyDown(menu, { key: 'Down', keyCode: 40, which: 40 });\n\t\t\tSimulate.keyDown(menu, { key: 'Down', keyCode: 40, which: 40 });\n\t\t\tSimulate.keyDown(menu, { key: 'Enter', keyCode: 13, which: 13 });\n\t\t\texpect(selected.value).to.equal('B0');\n\t\t});\n\n\t\tit('closes Menu on esc', () => {\n\t\t\texpect(getMenu(body)).to.equal(null);\n\t\t\tSimulate.click(btn, {});\n\t\t\texpect(getMenu(body)).to.not.equal(null);\n\t\t\tconst menuItems = getMenu(body).querySelectorAll('.slds-dropdown__item');\n\t\t\tSimulate.keyDown(menuItems[1].querySelector('a'), {\n\t\t\t\tkey: 'Esc',\n\t\t\t\tkeyCode: 27,\n\t\t\t\twhich: 27,\n\t\t\t});\n\t\t\texpect(getMenu(body)).to.equal(null);\n\t\t});\n\t});\n\n\tdescribe('multiple selection', () => {\n\t\tlet cmp;\n\t\tlet btn;\n\n\t\tbeforeEach(() => {\n\t\t\tcmp = getPicklist({\n\t\t\t\tmultiple: true,\n\t\t\t});\n\t\t\tbtn = findRenderedDOMComponentWithClass(cmp, 'slds-button');\n\t\t\tSimulate.click(btn, {});\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\tremovePicklist();\n\t\t});\n\n\t\tit('selects multiple items and renders pills', () => {\n\t\t\tclickOnItem(cmp, 0);\n\t\t\tclickOnItem(cmp, 1);\n\t\t\texpect(btn.textContent).to.equal('Multiple Options Selected');\n\n\t\t\tconst listbox = findRenderedDOMComponentWithClass(cmp, 'slds-listbox');\n\t\t\texpect(listbox.childNodes.length).to.equal(2);\n\t\t});\n\t});\n});\n"],"file":"picklist-base.browser-test.js"}