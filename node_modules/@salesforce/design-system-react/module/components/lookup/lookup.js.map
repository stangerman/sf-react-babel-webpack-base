{"version":3,"sources":["../../../.tmp-es/components/lookup/lookup.jsx"],"names":["React","createReactClass","PropTypes","escapeRegExp","isBoolean","isEqual","classNames","checkProps","Dialog","Button","Icon","InputIcon","Input","EventUtil","KEYS","Menu","LOOKUP","defaultFilter","term","item","data","type","label","match","RegExp","Lookup","displayName","propTypes","assistiveText","string","className","oneOfType","array","object","constrainToScrollParent","bool","describedById","menuPosition","disabled","emptyMessage","element","filterWith","func","flippable","footerRenderer","headerRenderer","iconCategory","iconInverse","iconName","iconPosition","oneOf","isInline","isOpen","listItemLabelRenderer","onBlur","onChange","onFocus","onRequestClose","onRequestOpen","onScroll","onSelect","onUnselect","options","isRequired","placeholder","required","searchTerm","sectionDividerRenderer","selectedItem","number","getDefaultProps","getInitialState","currentFocus","focusIndex","items","listLength","props","length","normalizeSearchTerm","selectedIndex","componentWillMount","pills","componentDidMount","modifyItems","componentWillReceiveProps","newProps","setState","componentDidUpdate","prevProps","prevState","isNaN","parseInt","state","input","focus","getClassName","isSelected","getIsOpen","setFirstIndex","nextFocusIndex","filteredItem","menuComponent","getFilteredItemForIndex","getHeader","Header","headerActive","header","headerComponent","handleClose","setFocus","getFooter","Footer","numFocusable","getNumFocusableItems","footerActive","footer","footerComponent","id","getListLength","qty","offset","increaseIndex","decreaseIndex","prevFocusIndex","selectItem","itemId","index","replace","selectItemByIndex","handleDeleteSelected","focusInput","handleClickOutside","handleEscape","event","trap","handleCancel","handleClick","handleBlur","target","currentTarget","value","handleFocus","handleChange","handleKeyDown","keyCode","ESCAPE","TAB","setTimeout","DOWN","trapImmediate","UP","ENTER","handlePillKeyDown","DELETE","BACKSPACE","toString","inputRefId","focusOnRender","hasSelection","itemsToModify","map","renderMenuContent","menu","renderInlineMenu","renderSeparateMenu","context","renderInput","icon","component","renderSelectedItem","renderIcon","labelClassName","pill","renderLabel","inputLabel","width","render","modal","undefined","formElementControlClasses","contextTypes","iconPath"],"mappings":"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","sourcesContent":["/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\n/* eslint-disable jsx-a11y/role-has-required-aria-props */\n\n// # Lookup Component\n\n// Implements the [Lookup design pattern](https://latest-204.lightningdesignsystem.com/components/lookups) in React.\n// Based on SLDS v2.1.0-dev\n\n// ## Dependencies\n\n// ### React\nimport React from 'react';\nimport createReactClass from 'create-react-class';\nimport PropTypes from 'prop-types';\nimport escapeRegExp from 'lodash.escaperegexp';\nimport isBoolean from 'lodash.isboolean';\nimport isEqual from 'lodash.isequal';\nimport classNames from 'classnames';\n\n// This component's `checkProps` which issues warnings to developers about properties\n// when in development mode (similar to React's built in development tools)\nimport checkProps from './check-props';\n\n// Children\nimport Dialog from '../utilities/dialog';\nimport Button from '../button';\nimport Icon from '../icon';\nimport InputIcon from '../icon/input-icon';\nimport Input from '../input';\n\n// ### Event Helpers\nimport EventUtil from '../../utilities/event';\nimport KEYS from '../../utilities/key-code';\n\nimport Menu from './menu';\n\nimport { LOOKUP } from '../../utilities/constants';\n\n/**\n * A function that takes a term string and an item and returns a truthy value if the item should be kept.\n */\nconst defaultFilter = (term, item) => {\n\tif (!term) return true;\n\treturn (\n\t\t(item.data && item.data.type === 'section') ||\n\t\titem.label.match(new RegExp(escapeRegExp(term), 'ig'))\n\t);\n};\n\n/**\n * ** Lookup is deprecated. Please use an auto-complete Combobox instead.**\n *\n * Lookup is an advanced inline search form. The lookup can parse through single or multi scoped datasets. The parsed dataset can be filtered by single or multi option selects.\n *\n * This component is wrapped in a [higher order component to listen for clicks outside itself](https://github.com/kentor/react-click-outside) and thus requires use of `ReactDOM`.\n */\nconst Lookup = createReactClass({\n\tdisplayName: LOOKUP,\n\n\tpropTypes: {\n\t\t/**\n\t\t * If present, the label associated with this `input` is overwritten\n\t\t * by this text and is visually not shown.\n\t\t */\n\t\tassistiveText: PropTypes.string,\n\t\t/**\n\t\t * Class names to be added to the tag classed with `slds-lookup`.\n\t\t */\n\t\tclassName: PropTypes.oneOfType([\n\t\t\tPropTypes.array,\n\t\t\tPropTypes.object,\n\t\t\tPropTypes.string,\n\t\t]),\n\t\t/**\n\t\t * If true, constrains the menu to the scroll parent. Has no effect if `isInline` is `true`.\n\t\t */\n\t\tconstrainToScrollParent: PropTypes.bool,\n\t\t/**\n\t\t * ID for aria-describedby (e.g. for an error message or a description)\n\t\t */\n\t\tdescribedById: PropTypes.string,\n\t\t/**\n\t\t * Please select one of the following:\n\t\t * * `absolute` - (default) The dialog will use `position: absolute` and style attributes to position itself. This allows inverted placement or flipping of the dialog.\n\t\t * * `overflowBoundaryElement` - The dialog will overflow scrolling parents. Use on elements that are aligned to the left or right of their target and don't care about the target being within a scrolling parent. Typically this is a popover or tooltip. Dropdown menus can usually open up and down if no room exists. In order to achieve this a portal element will be created and attached to `body`. This element will render into that detached render tree.\n\t\t * * `relative` - No styling or portals will be used. Menus will be positioned relative to their triggers. This is a great choice for HTML snapshot testing.\n\t\t */\n\t\tmenuPosition: PropTypes.string,\n\t\t/**\n\t\t * This prop is passed onto the `input`. Prevents dropdown menu from opening. Also applies disabled styling to input.\n\t\t */\n\t\tdisabled: PropTypes.bool,\n\t\t/**\n\t\t * Custom message that renders when no matches found. The default empty state is just text that says, 'No matches found.'.\n\t\t */\n\t\temptyMessage: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n\t\t/**\n\t\t * Custom function to filter the Lookup items when typing into input field. The default function is case-insensitive and uses the searchTerm to filter Lookup items on their labels.\n\t\t */\n\t\tfilterWith: PropTypes.func,\n\t\t/**\n\t\t * If true, the menu is constrained to the window and may be flipped up. Has no effect if `isInline` is `true`. In other components, its opposite is used `hasStaticAlignment`.\n\t\t */\n\t\tflippable: PropTypes.bool,\n\t\t/**\n\t\t * Custom component for Lookup footer. The default footer allows user to add new item - see <a href='http://www.lightningdesignsystem.com/components/lookups/#base'>Lightning Design System Lookup > Base</a>. To use the default footer, pass in <code>Lookup.DefaultFooter</code>.\n\t\t */\n\t\tfooterRenderer: PropTypes.func,\n\t\t/**\n\t\t * Custom component for Lookup header. The default header has a search icon and shows the search term - see <a href='http://www.lightningdesignsystem.com/components/lookups/#base'>Lightning Design System Lookup > Base</a>. To use the default header, pass in <code>Lookup.DefaultHeader</code>.\n\t\t */\n\t\theaderRenderer: PropTypes.func,\n\t\t/**\n\t\t * Please refer to <a href='http://www.lightningdesignsystem.com/resources/icons'>Lightning Design System Icons</a> to view categories.\n\t\t */\n\t\ticonCategory: PropTypes.string,\n\t\t/**\n\t\t * If true, icon color is white. If false, icon color is the default text color.\n\t\t */\n\t\ticonInverse: PropTypes.bool,\n\t\t/**\n\t\t * Name of icon. Please refer to <a href='http://www.lightningdesignsystem.com/resources/icons'>Lightning Design System Icons</a> to view icon names.\n\t\t */\n\t\ticonName: PropTypes.string,\n\t\t/**\n\t\t * Determines whether the input's icon will display that icon on the left or the right.\n\t\t */\n\t\ticonPosition: PropTypes.oneOf(['left', 'right']),\n\t\t/**\n\t\t * Renders menu within the wrapping trigger as a sibling of the button. By default, you will have an absolutely positioned container at an elevated z-index.\n\t\t */\n\t\tisInline: PropTypes.bool,\n\t\t/**\n\t\t * Whether or not the dropdown menu is open. This overrides the default behavior.\n\t\t */\n\t\tisOpen: PropTypes.bool,\n\t\t/**\n\t\t * Form label for input.\n\t\t */\n\t\tlabel: PropTypes.string,\n\t\t/**\n\t\t * Custom component that overrides the default Lookup Item component.\n\t\t */\n\t\tlistItemLabelRenderer: PropTypes.func,\n\t\t/**\n\t\t * Triggered when input focus is removed.\n\t\t */\n\t\tonBlur: PropTypes.func,\n\t\t/**\n\t\t * Triggered when the contents of the input changes.\n\t\t */\n\t\tonChange: PropTypes.func,\n\t\t/**\n\t\t * Triggered when input is focused.\n\t\t */\n\t\tonFocus: PropTypes.func,\n\t\t/**\n\t\t * Function called when the lookup dropdown would like hide. This will turn the Lookup into into a controlled component. Please use with `isOpen`.\n\t\t */\n\t\tonRequestClose: PropTypes.func,\n\t\t/**\n\t\t * Function called when the lookup dropdown would like show. This will turn the Lookup into into a controlled component. Please use with `isOpen`.\n\t\t */\n\t\tonRequestOpen: PropTypes.func,\n\t\t/**\n\t\t * Triggered when the user scrolls in the dropdown menu.\n\t\t */\n\t\tonScroll: PropTypes.func,\n\t\t/**\n\t\t * Triggered when an item is selected from the dropdown menu.\n\t\t */\n\t\tonSelect: PropTypes.func,\n\t\t/**\n\t\t * Triggered when an item is an item is removed from the input.\n\t\t */\n\t\tonUnselect: PropTypes.func,\n\t\t/**\n\t\t * Item added to the dropdown menu.\n\t\t */\n\t\toptions: PropTypes.array.isRequired,\n\t\t/**\n\t\t * Text that will appear in an empty input.\n\t\t */\n\t\tplaceholder: PropTypes.string,\n\t\t/**\n\t\t * If true, adds asterisk next to input label to indicate it is a required field.\n\t\t */\n\t\trequired: PropTypes.bool,\n\t\t/**\n\t\t * Text passed on to header search input of dropdown menu.\n\t\t */\n\t\tsearchTerm: PropTypes.string,\n\t\t/**\n\t\t * Custom component that overrides the default section divider\n\t\t */\n\t\tsectionDividerRenderer: PropTypes.func,\n\t\t/**\n\t\t * Index of current selected item. To clear the selection, pass in -1.\n\t\t */\n\t\tselectedItem: PropTypes.number,\n\t},\n\n\tgetDefaultProps () {\n\t\treturn {\n\t\t\tconstrainToScrollParent: true,\n\t\t\tfilterWith: defaultFilter,\n\t\t\ticonPosition: 'right',\n\t\t\tsearchTerm: '',\n\t\t\tmenuPosition: 'absolute',\n\t\t};\n\t},\n\n\tgetInitialState () {\n\t\treturn {\n\t\t\tcurrentFocus: null,\n\t\t\tfocusIndex: null,\n\t\t\titems: [],\n\t\t\tlistLength: this.props.options.length,\n\t\t\tsearchTerm: this.normalizeSearchTerm(this.props.searchTerm),\n\t\t\tselectedIndex: this.props.selectedItem,\n\t\t};\n\t},\n\n\tcomponentWillMount () {\n\t\t// `checkProps` issues warnings to developers about properties (similar to React's built in development tools)\n\t\tcheckProps(LOOKUP, this.props);\n\n\t\t// Keeps track of references of children for keyboard navigation\n\t\tthis.pills = [];\n\t},\n\n\tcomponentDidMount () {\n\t\tthis.modifyItems(this.props.options);\n\t},\n\n\tcomponentWillReceiveProps (newProps) {\n\t\tif (newProps.options) {\n\t\t\tthis.modifyItems(newProps.options);\n\t\t}\n\t\tif (\n\t\t\tnewProps.selectedItem !== this.props.selectedItem ||\n\t\t\t!isEqual(newProps.options, this.props.options)\n\t\t) {\n\t\t\tthis.setState({ selectedIndex: newProps.selectedItem });\n\t\t}\n\t},\n\n\tcomponentDidUpdate (prevProps, prevState) {\n\t\tif (\n\t\t\t!isNaN(parseInt(prevState.selectedIndex, 10)) &&\n\t\t\tisNaN(parseInt(this.state.selectedIndex, 10))\n\t\t) {\n\t\t\tif (this.input) {\n\t\t\t\tthis.input.focus();\n\t\t\t}\n\t\t} else if (\n\t\t\tisNaN(parseInt(prevState.selectedIndex, 10)) &&\n\t\t\t!isNaN(parseInt(this.state.selectedIndex, 10))\n\t\t) {\n\t\t\tif (this.pills[this.state.selectedIndex]) {\n\t\t\t\tthis.pills[this.state.selectedIndex].focus();\n\t\t\t}\n\t\t}\n\t},\n\n\tgetClassName () {\n\t\treturn classNames(this.props.className, 'slds-form-element slds-lookup', {\n\t\t\t'slds-has-selection': this.isSelected(),\n\t\t\t'slds-is-open': this.getIsOpen(),\n\t\t});\n\t},\n\n\tsetFirstIndex () {\n\t\tlet nextFocusIndex = 0;\n\t\tlet filteredItem = this.state.items[0];\n\n\t\tif (this.menuComponent && this.menuComponent.getFilteredItemForIndex) {\n\t\t\tfilteredItem = this.menuComponent.getFilteredItemForIndex(nextFocusIndex);\n\t\t}\n\n\t\tif (filteredItem && filteredItem.data.type === 'section') {\n\t\t\tnextFocusIndex += 1;\n\t\t}\n\n\t\tthis.setState({ focusIndex: nextFocusIndex });\n\t},\n\n\tgetHeader () {\n\t\tconst Header = this.props.headerRenderer;\n\t\tconst headerActive = this.state.focusIndex === 0;\n\n\t\treturn (\n\t\t\t<Header\n\t\t\t\tref={(header) => {\n\t\t\t\t\tthis.headerComponent = header;\n\t\t\t\t}}\n\t\t\t\t{...this.props}\n\t\t\t\tfocusIndex={this.state.focusIndex}\n\t\t\t\tisActive={headerActive}\n\t\t\t\tonClose={this.handleClose}\n\t\t\t\tsearchTerm={this.state.searchTerm}\n\t\t\t\tsetFocus={this.setFocus}\n\t\t\t/>\n\t\t);\n\t},\n\n\tgetFooter () {\n\t\tconst Footer = this.props.footerRenderer;\n\t\tconst numFocusable = this.getNumFocusableItems();\n\t\tconst footerActive = this.state.focusIndex === numFocusable;\n\n\t\treturn (\n\t\t\t<Footer\n\t\t\t\tref={(footer) => {\n\t\t\t\t\tthis.footerComponent = footer;\n\t\t\t\t}}\n\t\t\t\t{...this.props}\n\t\t\t\tfocusIndex={this.state.focusIndex}\n\t\t\t\tisActive={footerActive}\n\t\t\t\tonClose={this.handleClose}\n\t\t\t\tsetFocus={this.setFocus}\n\t\t\t/>\n\t\t);\n\t},\n\n\tsetFocus (id) {\n\t\tthis.setState({ currentFocus: id });\n\t},\n\n\tgetIsOpen () {\n\t\treturn !!(isBoolean(this.props.isOpen)\n\t\t\t? this.props.isOpen\n\t\t\t: this.state.isOpen);\n\t},\n\n\tgetListLength (qty) {\n\t\tif (qty !== this.state.listLength) {\n\t\t\tthis.setState({ listLength: qty });\n\t\t}\n\t},\n\n\tgetNumFocusableItems () {\n\t\tlet offset = 0;\n\n\t\tif (this.footerComponent) {\n\t\t\toffset += 1;\n\t\t}\n\n\t\tif (this.headerComponent) {\n\t\t\toffset += 1;\n\t\t}\n\n\t\treturn this.state.listLength - 1 + offset;\n\t},\n\n\t// =================================================\n\t// Using down/up keys, set Focus on list item and assign it to aria-activedescendant attribute in input.\n\t// Need to keep track of filtered list length to be able to increment/decrement the focus index so it's contained to the number of available list items.\n\tincreaseIndex () {\n\t\tconst numFocusable = this.getNumFocusableItems();\n\t\tlet nextFocusIndex =\n\t\t\tthis.state.focusIndex < numFocusable ? this.state.focusIndex + 1 : 0;\n\t\tconst filteredItem = this.menuComponent.getFilteredItemForIndex(\n\t\t\tnextFocusIndex\n\t\t);\n\n\t\tif (filteredItem && filteredItem.data.type === 'section') {\n\t\t\tnextFocusIndex += 1;\n\t\t}\n\n\t\tthis.setState({ focusIndex: nextFocusIndex });\n\t},\n\n\tdecreaseIndex () {\n\t\tconst numFocusable = this.getNumFocusableItems();\n\t\tlet prevFocusIndex =\n\t\t\tthis.state.focusIndex > 0 ? this.state.focusIndex - 1 : numFocusable;\n\t\tconst filteredItem = this.menuComponent.getFilteredItemForIndex(\n\t\t\tprevFocusIndex\n\t\t);\n\n\t\tif (filteredItem && filteredItem.data.type === 'section') {\n\t\t\tprevFocusIndex = prevFocusIndex === 0 ? numFocusable : prevFocusIndex - 1;\n\t\t}\n\n\t\tthis.setState({ focusIndex: prevFocusIndex });\n\t},\n\n\t// =================================================\n\t// Select menu item (onClick or on key enter/space)\n\tselectItem (itemId) {\n\t\tif (itemId) {\n\t\t\tconst index = itemId.replace('item-', '');\n\t\t\tthis.selectItemByIndex(index);\n\t\t}\n\t},\n\n\tselectItemByIndex (index) {\n\t\tif (index >= 0 && index < this.state.items.length) {\n\t\t\tif (this.props.onRequestClose) {\n\t\t\t\tthis.props.onRequestClose();\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tisOpen: false,\n\t\t\t\tselectedIndex: index,\n\t\t\t\tsearchTerm: '',\n\t\t\t});\n\t\t\tconst data = this.state.items[index].data;\n\t\t\tif (this.props.onSelect) {\n\t\t\t\tthis.props.onSelect(data);\n\t\t\t}\n\t\t}\n\t},\n\n\thandleDeleteSelected () {\n\t\tif (this.props.onRequestOpen) {\n\t\t\tthis.props.onRequestOpen();\n\t\t}\n\t\tthis.setState({\n\t\t\tselectedIndex: null,\n\t\t\tisOpen: true,\n\t\t});\n\n\t\tthis.focusInput();\n\n\t\tif (this.props.onUnselect) {\n\t\t\tthis.props.onUnselect();\n\t\t}\n\t},\n\n\t// =================================================\n\t// Event Listeners on Input\n\thandleClose () {\n\t\tif (this.props.onRequestClose) {\n\t\t\tthis.props.onRequestClose();\n\t\t}\n\t\tthis.setState({\n\t\t\tisOpen: false,\n\t\t\tfocusIndex: null,\n\t\t\tcurrentFocus: null,\n\t\t});\n\t},\n\n\thandleClickOutside () {\n\t\tthis.handleClose();\n\t},\n\n\thandleEscape (event) {\n\t\tif (this.getIsOpen() && event) {\n\t\t\tEventUtil.trap(event);\n\t\t}\n\t\tthis.handleClose();\n\t},\n\n\thandleCancel () {\n\t\tthis.handleClose();\n\t},\n\n\thandleClick () {\n\t\tif (this.props.onRequestOpen) {\n\t\t\tthis.props.onRequestOpen();\n\t\t}\n\t\tthis.setState({ isOpen: true });\n\t},\n\n\thandleBlur (event) {\n\t\tif (this.props.onBlur) {\n\t\t\tconst target = event.target || event.currentTarget;\n\t\t\tthis.props.onBlur(target.value);\n\t\t}\n\t},\n\n\thandleFocus (event) {\n\t\tif (this.props.onFocus) {\n\t\t\tconst target = event.target || event.currentTarget;\n\t\t\tthis.props.onFocus(target.value);\n\t\t}\n\t\tif (this.props.onRequestOpen) {\n\t\t\tthis.props.onRequestOpen();\n\t\t}\n\t\tthis.setState({ isOpen: true });\n\t},\n\n\thandleChange (event) {\n\t\tconst target = event.target || event.currentTarget;\n\t\tthis.setState({ searchTerm: this.normalizeSearchTerm(target.value) });\n\t\tif (this.props.onChange) {\n\t\t\tthis.props.onChange(target.value);\n\t\t}\n\t},\n\n\thandleKeyDown (event) {\n\t\tif (event.keyCode) {\n\t\t\t// If user hits esc key or tab key, close menu\n\t\t\tif (event.keyCode === KEYS.ESCAPE) {\n\t\t\t\tthis.handleEscape(event);\n\t\t\t} else if (event.keyCode === KEYS.TAB) {\n\t\t\t\t// remove the focus on input, tab focus shoud move to next tabbale elemnt\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.handleClose();\n\t\t\t\t}, 200);\n\t\t\t\tthis.handleBlur(event);\n\t\t\t} else {\n\t\t\t\tthis.handleClick();\n\t\t\t}\n\n\t\t\t// If user hits down key, advance aria activedescendant to next item\n\t\t\tif (event.keyCode === KEYS.DOWN) {\n\t\t\t\tEventUtil.trapImmediate(event);\n\t\t\t\tif (this.state.focusIndex === null) {\n\t\t\t\t\tthis.setFirstIndex();\n\t\t\t\t} else {\n\t\t\t\t\tthis.increaseIndex();\n\t\t\t\t}\n\t\t\t} else if (event.keyCode === KEYS.UP) {\n\t\t\t\t// If user hits up key, advance aria activedescendant to previous item\n\t\t\t\tEventUtil.trapImmediate(event);\n\t\t\t\tconst numFocusable = this.getNumFocusableItems();\n\t\t\t\tif (this.state.focusIndex === null) {\n\t\t\t\t\tthis.setState({ focusIndex: numFocusable });\n\t\t\t\t} else {\n\t\t\t\t\tthis.decreaseIndex();\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tevent.keyCode === KEYS.ENTER &&\n\t\t\t\tthis.state.focusIndex !== null\n\t\t\t) {\n\t\t\t\t// If user hits enter, select current activedescendant item\n\t\t\t\tEventUtil.trapImmediate(event);\n\t\t\t\t// If the focus is on the first fixed Action Item in Menu, click it\n\t\t\t\tif (this.headerComponent && this.state.focusIndex === 0) {\n\t\t\t\t\tthis.headerComponent.handleClick();\n\t\t\t\t} else if (\n\t\t\t\t\tthis.footerComponent &&\n\t\t\t\t\tthis.state.focusIndex === this.state.listLength + 1\n\t\t\t\t) {\n\t\t\t\t\t// If the focus is on the last fixed Action Item in Menu, click it\n\t\t\t\t\tthis.footerComponent.handleClick();\n\t\t\t\t} else {\n\t\t\t\t\t// If not, then select menu item\n\t\t\t\t\tthis.selectItem(this.state.currentFocus);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\thandlePillKeyDown (event) {\n\t\tif (event.keyCode) {\n\t\t\tif (event.keyCode === KEYS.DELETE || event.keyCode === KEYS.BACKSPACE) {\n\t\t\t\tEventUtil.trapImmediate(event);\n\t\t\t\tthis.handleDeleteSelected();\n\t\t\t}\n\t\t}\n\t},\n\n\tnormalizeSearchTerm (string) {\n\t\treturn (string || '').toString().replace(/^\\s+/, '');\n\t},\n\n\tinputRefId () {\n\t\treturn `${this.props.label}Lookup`;\n\t},\n\n\tfocusInput () {\n\t\tthis.focusOnRender = true;\n\t},\n\n\tisSelected () {\n\t\tconst hasSelection =\n\t\t\t!isNaN(parseInt(this.state.selectedIndex, 10)) &&\n\t\t\tthis.state.selectedIndex >= 0;\n\t\treturn hasSelection;\n\t},\n\n\tmodifyItems (itemsToModify) {\n\t\tconst items = itemsToModify.map((item, index) => ({\n\t\t\tid: `item-${index}`,\n\t\t\tlabel: item.label,\n\t\t\tdata: item,\n\t\t}));\n\n\t\tthis.setState({ items });\n\t},\n\n\t// =================================================\n\t// Rendering Things\n\trenderMenuContent () {\n\t\treturn (\n\t\t\t<Menu\n\t\t\t\tref={(menu) => {\n\t\t\t\t\tthis.menuComponent = menu;\n\t\t\t\t}}\n\t\t\t\temptyMessage={this.props.emptyMessage}\n\t\t\t\tfilterWith={this.props.filterWith}\n\t\t\t\tfocusIndex={this.state.focusIndex}\n\t\t\t\tfooter={this.props.footerRenderer ? this.getFooter() : null}\n\t\t\t\tgetListLength={this.getListLength}\n\t\t\t\theader={this.props.headerRenderer ? this.getHeader() : null}\n\t\t\t\ticonCategory={this.props.iconCategory}\n\t\t\t\ticonInverse={this.props.iconInverse}\n\t\t\t\ticonName={this.props.iconName}\n\t\t\t\titems={this.state.items}\n\t\t\t\tlabel={this.props.label}\n\t\t\t\tlistItemLabelRenderer={this.props.listItemLabelRenderer}\n\t\t\t\tlistLength={this.state.listLength}\n\t\t\t\tonSelect={this.selectItem}\n\t\t\t\tsearchTerm={this.state.searchTerm}\n\t\t\t\tsectionDividerRenderer={this.props.sectionDividerRenderer}\n\t\t\t\tsetFocus={this.setFocus}\n\t\t\t/>\n\t\t);\n\t},\n\n\trenderInlineMenu () {\n\t\treturn this.getIsOpen() ? (\n\t\t\t<div\n\t\t\t\tclassName=\"ignore-react-onclickoutside slds-lookup__menu\"\n\t\t\t\trole=\"listbox\"\n\t\t\t>\n\t\t\t\t{this.renderMenuContent()}\n\t\t\t</div>\n\t\t) : null;\n\t},\n\n\trenderSeparateMenu () {\n\t\t// FOR BACKWARDS COMPATIBILITY\n\t\tconst menuPosition = this.props.isInline\n\t\t\t? 'relative'\n\t\t\t: this.props.menuPosition; // eslint-disable-line react/prop-types\n\t\treturn this.getIsOpen() ? (\n\t\t\t<Dialog\n\t\t\t\talign=\"bottom\"\n\t\t\t\tclassName=\"slds-lookup__menu slds-show\"\n\t\t\t\tcloseOnTabKey\n\t\t\t\tcontentsClassName=\"slds-lookup__menu slds-show\"\n\t\t\t\tcontext={this.context}\n\t\t\t\tinheritWidthOf=\"target\"\n\t\t\t\tonClose={this.handleCancel}\n\t\t\t\thasStaticAlignement={!this.props.flippable}\n\t\t\t\tconstrainToScrollParent={this.props.constrainToScrollParent}\n\t\t\t\tonRequestTargetElement={() => this.input}\n\t\t\t\tposition={menuPosition}\n\t\t\t>\n\t\t\t\t{this.renderMenuContent()}\n\t\t\t</Dialog>\n\t\t) : null;\n\t},\n\n\trenderInput () {\n\t\treturn (\n\t\t\t<Input\n\t\t\t\taria-activedescendant={\n\t\t\t\t\tthis.state.currentFocus ? this.state.currentFocus : ''\n\t\t\t\t}\n\t\t\t\taria-autocomplete=\"list\"\n\t\t\t\taria-describedby={this.props.describedById}\n\t\t\t\taria-expanded={!!this.getIsOpen()}\n\t\t\t\tassistiveText={this.props.assistiveText}\n\t\t\t\tclassName=\"slds-lookup__search-input\"\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\ticonRight={\n\t\t\t\t\t<InputIcon\n\t\t\t\t\t\tassistiveText={{ icon: 'Search' }}\n\t\t\t\t\t\tcategory=\"utility\"\n\t\t\t\t\t\tname=\"search\"\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tid={this.inputRefId()}\n\t\t\t\tonBlur={this.handleBlur}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\tonClick={this.handleClick}\n\t\t\t\tonFocus={this.handleFocus}\n\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\tinputRef={(component) => {\n\t\t\t\t\tthis.input = component;\n\t\t\t\t\tif (this.focusOnRender) {\n\t\t\t\t\t\tthis.input.focus();\n\t\t\t\t\t\tthis.focusOnRender = false;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tplaceholder={this.props.placeholder}\n\t\t\t\trole=\"combobox\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalue={this.state.searchTerm}\n\t\t\t/>\n\t\t);\n\t},\n\n\trenderSelectedItem () {\n\t\tconst selectedItem = this.props.options[this.state.selectedIndex].label;\n\t\tconst renderIcon = this.props.iconName ? (\n\t\t\t<Icon\n\t\t\t\tcategory={this.props.iconCategory}\n\t\t\t\tclassName=\"slds-icon slds-pill__icon\"\n\t\t\t\tinverse={this.props.iconInverse}\n\t\t\t\tname={this.props.iconName}\n\t\t\t/>\n\t\t) : null;\n\t\tconst labelClassName = this.props.iconName\n\t\t\t? 'slds-pill__label'\n\t\t\t: 'slds-pill__label slds-m-left--x-small';\n\n\t\t// i18n\n\t\treturn (\n\t\t\t<div className=\"slds-pill__container\">\n\t\t\t\t{/* eslint-disable no-script-url */}\n\t\t\t\t<a\n\t\t\t\t\thref=\"javascript:void(0)\"\n\t\t\t\t\tclassName=\"slds-pill\"\n\t\t\t\t\tref={(pill) => {\n\t\t\t\t\t\tthis.pills[this.state.selectedIndex] = pill;\n\t\t\t\t\t}}\n\t\t\t\t\tonKeyDown={this.handlePillKeyDown}\n\t\t\t\t>\n\t\t\t\t\t{/* eslint-enable no-script-url */}\n\t\t\t\t\t{renderIcon}\n\t\t\t\t\t<span className={labelClassName}>{selectedItem}</span>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tassistiveText=\"Press delete to remove\"\n\t\t\t\t\t\tclassName=\"slds-pill__remove slds-button--icon-bare\"\n\t\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"close\"\n\t\t\t\t\t\tonClick={this.handleDeleteSelected}\n\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\tvariant=\"icon\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t);\n\t},\n\n\trenderLabel () {\n\t\tlet inputLabel;\n\t\tconst required = this.props.required ? (\n\t\t\t<span className=\"slds-required\">*</span>\n\t\t) : null;\n\t\tif (this.isSelected()) {\n\t\t\t// inline style override\n\t\t\tinputLabel = (\n\t\t\t\t<span className=\"slds-form-element__label\" style={{ width: '100%' }}>\n\t\t\t\t\t{required}\n\t\t\t\t\t{this.props.label}\n\t\t\t\t</span>\n\t\t\t);\n\t\t} else {\n\t\t\tinputLabel = (\n\t\t\t\t<label\n\t\t\t\t\tclassName=\"slds-form-element__label\"\n\t\t\t\t\thtmlFor={this.inputRefId()}\n\t\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\t>\n\t\t\t\t\t{required}\n\t\t\t\t\t{this.props.label}\n\t\t\t\t</label>\n\t\t\t);\n\t\t}\n\t\treturn inputLabel;\n\t},\n\n\trender () {\n\t\tlet isInline;\n\t\t/* eslint-disable react/prop-types */\n\t\tif (this.props.isInline) {\n\t\t\tisInline = true;\n\t\t} else if (this.props.modal !== undefined) {\n\t\t\tisInline = !this.props.modal;\n\t\t}\n\t\t/* eslint-enable react/prop-types */\n\n\t\tconst formElementControlClasses = {\n\t\t\t'slds-form-element__control': true,\n\t\t\t[`slds-input-has-icon slds-input-has-icon--${\n\t\t\t\tthis.props.iconPosition\n\t\t\t}`]: !this.isSelected(),\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={this.getClassName()}\n\t\t\t\tdata-select=\"single\"\n\t\t\t\tdata-scope=\"single\"\n\t\t\t\tonScroll={this.props.onScroll}\n\t\t\t>\n\t\t\t\t{this.props.label ? this.renderLabel() : null}\n\t\t\t\t<div className={classNames(formElementControlClasses)}>\n\t\t\t\t\t{this.isSelected() ? this.renderSelectedItem() : null}\n\t\t\t\t\t{!this.isSelected() ? this.renderInput() : null}\n\t\t\t\t</div>\n\t\t\t\t{isInline ? this.renderInlineMenu() : this.renderSeparateMenu()}\n\t\t\t</div>\n\t\t);\n\t},\n});\n\nLookup.contextTypes = {\n\ticonPath: PropTypes.string,\n};\n\nexport default Lookup;\n"],"file":"lookup.js"}