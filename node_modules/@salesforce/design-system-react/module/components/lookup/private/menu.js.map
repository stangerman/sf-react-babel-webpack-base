{"version":3,"sources":["../../../../.tmp-es/components/lookup/private/menu.jsx"],"names":["React","PropTypes","Item","displayName","propTypes","boldRegex","instanceOf","RegExp","emptyMessage","oneOfType","string","element","filterWith","func","focusIndex","number","getListLength","iconCategory","items","array","label","listLength","searchTerm","setFocus","defaultProps","Menu","props","itemIndex","itemHeight","listRef","scrollTop","state","filteredItems","prevProps","childFilter","child","className","indexOf","list","slice","call","children","filter","length","setState","i","item","result","forEach","index","data","type","nextItem","push","filterEmptySections","renderItems","footer","header","map","component","id","isActive","sectionDividerRenderer","SectionDivider","handleItemFocus","iconInverse","iconName","listItemLabelRenderer","onSelect","sectionDivider","renderHeader","renderContent","renderFooter","Component"],"mappings":"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","sourcesContent":["/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Item from './item';\n\n/* eslint-disable react/no-did-update-set-state */\n\nconst displayName = 'Lookup-Menu';\nconst propTypes = {\n\tboldRegex: PropTypes.instanceOf(RegExp),\n\temptyMessage: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n\tfilterWith: PropTypes.func,\n\tfocusIndex: PropTypes.number,\n\tgetListLength: PropTypes.func,\n\ticonCategory: PropTypes.string,\n\titems: PropTypes.array,\n\tlabel: PropTypes.string,\n\tlistLength: PropTypes.number,\n\tsearchTerm: PropTypes.string,\n\tsetFocus: PropTypes.func,\n};\nconst defaultProps = {\n\temptyMessage: 'No matches found.',\n};\nclass Menu extends React.Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.state = { filteredItems: this.filteredItems() };\n\t}\n\n\t// Set filtered list length in parent to determine active indexes for aria-activedescendent\n\tcomponentDidUpdate (prevProps) {\n\t\t// make an array of the children of the list but only count the actual items (but include section dividers)\n\t\tconst childFilter = (child) =>\n\t\t\tchild.className.indexOf('js-slds-lookup__item') > -1 ||\n\t\t\tchild.className.indexOf('slds-lookup__divider') > -1;\n\t\tconst list = [].slice.call(this.listRef.children).filter(childFilter)\n\t\t\t.length;\n\t\tthis.props.getListLength(list);\n\t\tif (\n\t\t\tprevProps.items !== this.props.items ||\n\t\t\tprevProps.filter !== this.props.filter ||\n\t\t\tprevProps.searchTerm !== this.props.searchTerm\n\t\t) {\n\t\t\t// eslint-disable-next-line class-methods-use-this\n\t\t\tthis.setState({\n\t\t\t\tfilteredItems: this.filteredItems(),\n\t\t\t});\n\t\t}\n\t}\n\n\tgetFilteredItemForIndex (i) {\n\t\tif (\n\t\t\ti > -1 &&\n\t\t\tthis.state.filteredItems &&\n\t\t\ti < this.state.filteredItems.length\n\t\t) {\n\t\t\treturn this.state.filteredItems[i];\n\t\t}\n\t\treturn null;\n\t}\n\n\tfilter (item) {\n\t\treturn this.props.filterWith(this.props.searchTerm, item);\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tfilterEmptySections (items) {\n\t\tconst result = [];\n\t\titems.forEach((item, index) => {\n\t\t\tif (item && item.data && item.data.type === 'section') {\n\t\t\t\tif (index + 1 < items.length) {\n\t\t\t\t\tconst nextItem = items[index + 1];\n\t\t\t\t\tif (nextItem.data && nextItem.data.type !== 'section') {\n\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n\tfilteredItems () {\n\t\treturn this.filterEmptySections(this.props.items.filter(this.filter, this));\n\t}\n\n\t// Scroll menu up/down when using mouse keys\n\thandleItemFocus = (itemIndex, itemHeight) => {\n\t\tif (this.listRef) {\n\t\t\tthis.listRef.scrollTop = itemIndex * itemHeight;\n\t\t}\n\t};\n\n\trenderContent () {\n\t\tif (this.state.filteredItems.length === 0) {\n\t\t\treturn (\n\t\t\t\t<li className=\"slds-lookup__message\" aria-live=\"polite\">\n\t\t\t\t\t<span className=\"slds-m-left--x-large slds-p-vertical--medium\">\n\t\t\t\t\t\t{this.props.emptyMessage}\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t);\n\t\t}\n\n\t\treturn this.renderItems();\n\t}\n\n\trenderFooter () {\n\t\treturn this.props.footer;\n\t}\n\n\trenderHeader () {\n\t\treturn this.props.header;\n\t}\n\n\trenderItems () {\n\t\tconst focusIndex = this.props.focusIndex;\n\t\treturn this.state.filteredItems.map((component, i) => {\n\t\t\t// isActive means it is aria-activedescendant\n\t\t\tconst id = component.id;\n\t\t\tlet isActive = false;\n\t\t\tif (this.props.header) {\n\t\t\t\tisActive = focusIndex === i + 1;\n\t\t\t} else {\n\t\t\t\tisActive = focusIndex === i;\n\t\t\t}\n\t\t\tif (component.data.type === 'section') {\n\t\t\t\tif (this.props.sectionDividerRenderer) {\n\t\t\t\t\tconst SectionDivider = this.props.sectionDividerRenderer;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<SectionDivider\n\t\t\t\t\t\t\tdata={component.data}\n\t\t\t\t\t\t\tkey={`section_header_${id}`}\n\t\t\t\t\t\t\t{...this.props}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Item\n\t\t\t\t\tboldRegex={this.props.boldRegex}\n\t\t\t\t\tdata={component.data}\n\t\t\t\t\thandleItemFocus={this.handleItemFocus}\n\t\t\t\t\ticonCategory={this.props.iconCategory}\n\t\t\t\t\ticonInverse={this.props.iconInverse}\n\t\t\t\t\ticonName={this.props.iconName}\n\t\t\t\t\tid={id}\n\t\t\t\t\tindex={i}\n\t\t\t\t\tisActive={isActive}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tlistItemLabelRenderer={this.props.listItemLabelRenderer}\n\t\t\t\t\tonSelect={this.props.onSelect}\n\t\t\t\t\tsearchTerm={this.props.searchTerm}\n\t\t\t\t\tsetFocus={this.props.setFocus}\n\t\t\t\t>\n\t\t\t\t\t{component}\n\t\t\t\t</Item>\n\t\t\t);\n\t\t});\n\t}\n\n\trenderSectionDivider () {\n\t\treturn this.props.sectionDivider;\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<section id=\"menuContainer\" className=\"ignore-react-onclickoutside\">\n\t\t\t\t{this.renderHeader()}\n\t\t\t\t<ul\n\t\t\t\t\tid=\"list\"\n\t\t\t\t\tclassName=\"slds-lookup__list\"\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t\tref={(list) => {\n\t\t\t\t\t\tif (list) {\n\t\t\t\t\t\t\tthis.listRef = list;\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.renderContent()}\n\t\t\t\t</ul>\n\t\t\t\t{this.renderFooter()}\n\t\t\t</section>\n\t\t);\n\t}\n}\n\nMenu.displayName = displayName;\nMenu.propTypes = propTypes;\nMenu.defaultProps = defaultProps;\n\nexport default Menu;\n"],"file":"menu.js"}