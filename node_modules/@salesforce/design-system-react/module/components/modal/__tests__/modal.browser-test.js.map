{"version":3,"sources":["../../../../.tmp-es/components/modal/__tests__/modal.browser-test.jsx"],"names":["React","ReactDOM","assign","TestUtils","expect","SLDSModal","IconSettings","Simulate","describe","container","renderedNode","afterEach","unmountComponentAtNode","document","body","removeChild","defaultProps","align","children","renderModal","modalInstance","createElement","opener","appendChild","render","createModal","props","getModal","getModalNode","dom","querySelector","beforeEach","containerClassName","contentClassName","contentStyle","height","isOpen","portalClassName","it","modalContainer","to","exist","modalContent","style","equal","modalPortal","overflow","be","null","cmp","closed","modal","assistiveText","closeButton","size","onRequestClose","className","include","firstChild","closeBtn","title","false","click","true","role","getAttribute","dismissible","header","headerClassName","customHeader","not","feet","prompt","footer","innerHTML","directional"],"mappings":"AAAA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,MAAT,QAAuB,MAAvB;AAEA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,YAAP,MAAyB,qBAAzB;IAEQC,Q,GAAaJ,S,CAAbI,Q;AAERC,SAAS,aAAT,EAAwB,YAAY;AACnC,MAAIC,SAAJ;AACA,MAAIC,YAAJ;AAEAC,YAAU,YAAM;AACfV,aAASW,sBAAT,CAAgCH,SAAhC;AACAI,aAASC,IAAT,CAAcC,WAAd,CAA0BN,SAA1B;AACAA,gBAAY,IAAZ;AACA,GAJD;AAMA,MAAMO,eAAe;AACpBC,WAAO,KADa;AAEpBC,cAAU;AAFU,GAArB;;AAKA,MAAMC,cAAc,SAAdA,WAAc,CAACC,aAAD,EAAmB;AACtCX,gBAAYI,SAASQ,aAAT,CAAuB,KAAvB,CAAZ;AACA,QAAMC,SACL,oCACC,oBAAC,YAAD;AAAc,gBAAS;AAAvB,OAAwCF,aAAxC,CADD,CADD;AAKAP,aAASC,IAAT,CAAcS,WAAd,CAA0Bd,SAA1B;AACAC,mBAAeT,SAASuB,MAAT,CAAgBF,MAAhB,EAAwBb,SAAxB,CAAf;AACA,WAAOC,YAAP;AACA,GAVD;;AAYA,MAAMe,cAAc,SAAdA,WAAc,CAACC,KAAD;AAAA,WACnB1B,MAAMqB,aAAN,CAAoBhB,SAApB,EAA+BH,OAAO,EAAP,EAAWc,YAAX,EAAyBU,KAAzB,CAA/B,CADmB;AAAA,GAApB;;AAGA,MAAMC,WAAW,SAAXA,QAAW,CAACD,KAAD;AAAA,WAAWP,YAAYM,YAAYC,KAAZ,CAAZ,CAAX;AAAA,GAAjB;;AAEA,MAAME,eAAe,SAAfA,YAAe,CAACC,GAAD;AAAA,WAASA,IAAIC,aAAJ,CAAkB,aAAlB,CAAT;AAAA,GAArB;;AAEAtB,WAAS,SAAT,EAAoB,YAAM;AACzBuB,eAAW,YAAM;AAChBJ,eAAS;AACRK,4BAAoB,2BADZ;AAERC,0BAAkB,yBAFV;AAGRC,sBAAc;AAAEC,kBAAQ;AAAV,SAHN;AAIRC,gBAAQ,IAJA;AAKRC,yBAAiB;AALT,OAAT;AAOA,KARD;AAUAC,OAAG,qFAAH,EAA0F,YAAM;AAC/F,UAAMC,iBAAiBX,aAAaf,SAASC,IAAtB,EAA4BgB,aAA5B,CACtB,kDADsB,CAAvB;AAGA1B,aAAOmC,cAAP,EAAuBC,EAAvB,CAA0BC,KAA1B;AACA,UAAMC,eAAed,aAAaf,SAASC,IAAtB,EAA4BgB,aAA5B,CACpB,8CADoB,CAArB;AAGA1B,aAAOsC,YAAP,EAAqBF,EAArB,CAAwBC,KAAxB;AACArC,aAAOsC,aAAaC,KAAb,CAAmBR,MAA1B,EAAkCK,EAAlC,CAAqCI,KAArC,CAA2C,OAA3C;AACA,UAAMC,cAAchC,SAASiB,aAAT,CACnB,gCADmB,CAApB;AAGA1B,aAAOyC,WAAP,EAAoBL,EAApB,CAAuBC,KAAvB;AACA,KAdD;AAeA,GA1BD;AA4BAjC,WAAS,cAAT,EAAyB,YAAM;AAC9BuB,eAAW,YAAM;AAChBJ,eAAS;AAAES,gBAAQ;AAAV,OAAT;AACA,KAFD;AAIAE,OAAG,sBAAH,EAA2B,YAAM;AAChClC,aAAOS,SAASC,IAAT,CAAc6B,KAAd,CAAoBG,QAA3B,EAAqCN,EAArC,CAAwCI,KAAxC,CAA8C,SAA9C;AACA,KAFD;AAIAN,OAAG,6BAAH,EAAkC,YAAM;AACvClC,aAAOwB,aAAaf,SAASC,IAAtB,CAAP,EAAoC0B,EAApC,CAAuCO,EAAvC,CAA0CC,IAA1C;AACA,KAFD;AAGA,GAZD;AAcAxC,WAAS,YAAT,EAAuB,YAAM;AAC5B,QAAIyC,GAAJ;AACA,QAAIC,MAAJ;AACA,QAAIC,KAAJ;AAEApB,eAAW,YAAM;AAChBmB,eAAS,KAAT;AACAD,YAAMtB,SAAS;AACdyB,uBAAe;AACdC,uBAAa;AADC,SADD;AAIdjB,gBAAQ,IAJM;AAKdkB,cAAM,OALQ;AAMdtB,4BAAoB,iBANN;AAOduB,wBAAgB,0BAAM;AACrBL,mBAAS,IAAT;AACA;AATa,OAAT,CAAN;AAWAC,cAAQvB,aAAaf,SAASC,IAAtB,CAAR;AACA,KAdD;AAgBAwB,OAAG,sBAAH,EAA2B,YAAM;AAChClC,aAAO+C,MAAMK,SAAb,EAAwBhB,EAAxB,CAA2BiB,OAA3B,CAAmC,mBAAnC;AACA,KAFD;AAIAnB,OAAG,iDAAH,EAAsD,YAAM;AAC3DlC,aAAO+C,MAAMO,UAAN,CAAiBF,SAAxB,EAAmChB,EAAnC,CAAsCiB,OAAtC,CAA8C,iBAA9C;AACA,KAFD;AAIAnB,OAAG,uDAAH,EAA4D,YAAM;AACjE,UAAMqB,WAAWR,MAAMrB,aAAN,CAAoB,oBAApB,CAAjB;AACA1B,aAAOuD,SAASC,KAAhB,EAAuBpB,EAAvB,CAA0BI,KAA1B,CAAgC,MAAhC;AACA,KAHD;AAKAN,OAAG,sBAAH,EAA2B,YAAM;AAChC,UAAMqB,WAAWR,MAAMrB,aAAN,CAAoB,oBAApB,CAAjB;AACA1B,aAAO8C,MAAP,EAAeV,EAAf,CAAkBO,EAAlB,CAAqBc,KAArB;AACAtD,eAASuD,KAAT,CAAeH,QAAf,EAAyB,EAAzB;AACAvD,aAAO8C,MAAP,EAAeV,EAAf,CAAkBO,EAAlB,CAAqBgB,IAArB;AACA,KALD;AAMA,GAxCD;AA0CAvD,WAAS,oBAAT,EAA+B,YAAM;AACpC8B,OAAG,mCAAH,EAAwC,YAAM;AAC7C,UAAMW,MAAMtB,SAAS;AACpBS,gBAAQ;AADY,OAAT,CAAZ;AAGA,UAAMe,QAAQvB,aAAaf,SAASC,IAAtB,CAAd;AACA,UAAMkD,OAAOb,MAAMc,YAAN,CAAmB,MAAnB,CAAb;AACA7D,aAAO4D,IAAP,EAAaxB,EAAb,CAAgBI,KAAhB,CAAsB,QAAtB;AACA,KAPD;AASAN,OAAG,4CAAH,EAAiD,YAAM;AACtD,UAAMW,MAAMtB,SAAS;AACpBS,gBAAQ,IADY;AAEpB8B,qBAAa;AAFO,OAAT,CAAZ;AAIA,UAAMf,QAAQvB,aAAaf,SAASC,IAAtB,CAAd;AACA,UAAMkD,OAAOb,MAAMc,YAAN,CAAmB,MAAnB,CAAb;AACA7D,aAAO4D,IAAP,EAAaxB,EAAb,CAAgBI,KAAhB,CAAsB,aAAtB;AACA,KARD;AASA,GAnBD;AAqBApC,WAAS,8CAAT,EAAyD,YAAM;AAC9D,QAAI2C,KAAJ;AAEApB,eAAW,YAAM;AAChBJ,eAAS;AACRwC,gBAAQ;AAAK,cAAG;AAAR,0BADA;AAERC,yBAAiB,cAFT;AAGRhC,gBAAQ;AAHA,OAAT;AAKAe,cAAQvB,aAAaf,SAASC,IAAtB,CAAR;AACA,KAPD;AASAwB,OAAG,iBAAH,EAAsB,YAAM;AAC3B,UAAM+B,eAAelB,MAAMrB,aAAN,CAAoB,eAApB,CAArB;AACA1B,aAAOiE,YAAP,EAAqB7B,EAArB,CAAwB8B,GAAxB,CAA4BvB,EAA5B,CAA+BC,IAA/B;AACA,KAHD;AAKAV,OAAG,8BAAH,EAAmC,YAAM;AACxClC,aAAO+C,MAAMrB,aAAN,CAAoB,qBAApB,EAA2C0B,SAAlD,EAA6DhB,EAA7D,CAAgEiB,OAAhE,CACC,cADD;AAGA,KAJD;AAKA,GAtBD;AAwBAjD,WAAS,6BAAT,EAAwC,YAAM;AAC7C,QAAI2C,KAAJ;AAEApB,eAAW,YAAM;AAChB,UAAMwC,OAAO;AAAK,mBAAU;AAAf,gBAAb;AACA5C,eAAS;AACRS,gBAAQ,IADA;AAERoC,gBAAQ,SAFA;AAGRZ,eAAO,eAHC;AAIRa,gBAAQF;AAJA,OAAT;AAMApB,cAAQvB,aAAaf,SAASC,IAAtB,CAAR;AACA,KATD;AAWAwB,OAAG,iBAAH,EAAsB,YAAM;AAC3B,UAAMmC,SAAStB,MAAMrB,aAAN,CAAoB,qBAApB,CAAf;AACA1B,aAAOqE,OAAOjB,SAAd,EAAyBhB,EAAzB,CAA4BiB,OAA5B,CAAoC,qBAApC;AACA,KAHD;AAKAnB,OAAG,uBAAH,EAA4B,YAAM;AACjClC,aAAO+C,MAAMK,SAAb,EAAwBhB,EAAxB,CAA2BiB,OAA3B,CAAmC,oBAAnC;AACA,KAFD;AAIAnB,OAAG,6BAAH,EAAkC,YAAM;AACvClC,aAAO+C,MAAMrB,aAAN,CAAoB,qBAApB,EAA2C0B,SAAlD,EAA6DhB,EAA7D,CAAgEiB,OAAhE,CACC,qBADD;AAGA,KAJD;AAMAnB,OAAG,8BAAH,EAAmC,YAAM;AACxClC,aAAO+C,MAAMrB,aAAN,CAAoB,OAApB,EAA6B4C,SAApC,EAA+ClC,EAA/C,CAAkDI,KAAlD,CAAwD,MAAxD;AACA,KAFD;AAGA,GAhCD;AAkCApC,WAAS,kBAAT,EAA6B,YAAM;AAClC,QAAI2C,KAAJ;AAEApB,eAAW,YAAM;AAChB,UAAMwC,OAAO,CACZ;AAAK,mBAAU;AAAf,iBADY,EAEZ;AAAK,mBAAU;AAAf,iBAFY,CAAb;AAIA5C,eAAS;AACRS,gBAAQ,IADA;AAERuC,qBAAa,IAFL;AAGRF,gBAAQF;AAHA,OAAT;AAKApB,cAAQvB,aAAaf,SAASC,IAAtB,CAAR;AACA,KAXD;AAaAwB,OAAG,iBAAH,EAAsB,YAAM;AAC3B,UAAMmC,SAAStB,MAAMrB,aAAN,CAAoB,kCAApB,CAAf;AACA1B,aAAOqE,OAAOjB,SAAd,EAAyBhB,EAAzB,CAA4BiB,OAA5B,CAAoC,oBAApC;AACA,KAHD;AAIA,GApBD;AAsBAjD,WAAS,mBAAT,EAA8B,YAAM;AACnC,QAAI2C,KAAJ;AAEApB,eAAW,YAAM;AAChB,UAAMwC,OAAO,CACZ;AAAQ,mBAAU;AAAlB,kBADY,EAEZ;AAAQ,mBAAU;AAAlB,gBAFY,CAAb;AAIA5C,eAAS;AACRS,gBAAQ,IADA;AAERuC,qBAAa,IAFL;AAGRF,gBAAQF;AAHA,OAAT;AAKApB,cAAQvB,aAAaf,SAASC,IAAtB,CAAR;AACA,KAXD;AAaAwB,OAAG,gCAAH,EAAqC,YAAM,CAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAfD;AAiBAA,OAAG,6BAAH,EAAkC,YAAM,CACvC;AACA,KAFD;AAIAA,OAAG,0BAAH,EAA+B,YAAM,CACpC;AACA,KAFD;AAGA,GAxCD;AAyCA,CApQD","sourcesContent":["/* eslint-disable react/no-find-dom-node */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport assign from 'lodash.assign';\nimport TestUtils from 'react-addons-test-utils';\nimport { expect } from 'chai';\n\nimport SLDSModal from '../../modal';\nimport IconSettings from '../../icon-settings';\n\nconst { Simulate } = TestUtils;\n\ndescribe('SLDSModal: ', function () {\n\tlet container;\n\tlet renderedNode;\n\n\tafterEach(() => {\n\t\tReactDOM.unmountComponentAtNode(container);\n\t\tdocument.body.removeChild(container);\n\t\tcontainer = null;\n\t});\n\n\tconst defaultProps = {\n\t\talign: 'top',\n\t\tchildren: <div>hello</div>,\n\t};\n\n\tconst renderModal = (modalInstance) => {\n\t\tcontainer = document.createElement('div');\n\t\tconst opener = (\n\t\t\t<button>\n\t\t\t\t<IconSettings iconPath=\"/assets/icons\">{modalInstance}</IconSettings>\n\t\t\t</button>\n\t\t);\n\t\tdocument.body.appendChild(container);\n\t\trenderedNode = ReactDOM.render(opener, container);\n\t\treturn renderedNode;\n\t};\n\n\tconst createModal = (props) =>\n\t\tReact.createElement(SLDSModal, assign({}, defaultProps, props));\n\n\tconst getModal = (props) => renderModal(createModal(props));\n\n\tconst getModalNode = (dom) => dom.querySelector('.slds-modal');\n\n\tdescribe('Styling', () => {\n\t\tbeforeEach(() => {\n\t\t\tgetModal({\n\t\t\t\tcontainerClassName: 'container-class-name-test',\n\t\t\t\tcontentClassName: 'content-class-name-test',\n\t\t\t\tcontentStyle: { height: '500px' },\n\t\t\t\tisOpen: true,\n\t\t\t\tportalClassName: 'portal-class-name-test',\n\t\t\t});\n\t\t});\n\n\t\tit('has correct containerClassName, contentClassName, contentStyle, and portalClassName', () => {\n\t\t\tconst modalContainer = getModalNode(document.body).querySelector(\n\t\t\t\t'.slds-modal__container.container-class-name-test'\n\t\t\t);\n\t\t\texpect(modalContainer).to.exist;\n\t\t\tconst modalContent = getModalNode(document.body).querySelector(\n\t\t\t\t'.slds-modal__content.content-class-name-test'\n\t\t\t);\n\t\t\texpect(modalContent).to.exist;\n\t\t\texpect(modalContent.style.height).to.equal('500px');\n\t\t\tconst modalPortal = document.querySelector(\n\t\t\t\t'body > .portal-class-name-test'\n\t\t\t);\n\t\t\texpect(modalPortal).to.exist;\n\t\t});\n\t});\n\n\tdescribe('Closed modal', () => {\n\t\tbeforeEach(() => {\n\t\t\tgetModal({ isOpen: false });\n\t\t});\n\n\t\tit('updates the overflow', () => {\n\t\t\texpect(document.body.style.overflow).to.equal('inherit');\n\t\t});\n\n\t\tit('does not render to the body', () => {\n\t\t\texpect(getModalNode(document.body)).to.be.null;\n\t\t});\n\t});\n\n\tdescribe('Open modal', () => {\n\t\tlet cmp;\n\t\tlet closed;\n\t\tlet modal;\n\n\t\tbeforeEach(() => {\n\t\t\tclosed = false;\n\t\t\tcmp = getModal({\n\t\t\t\tassistiveText: {\n\t\t\t\t\tcloseButton: 'Exit',\n\t\t\t\t},\n\t\t\t\tisOpen: true,\n\t\t\t\tsize: 'large',\n\t\t\t\tcontainerClassName: 'my-custom-class',\n\t\t\t\tonRequestClose: () => {\n\t\t\t\t\tclosed = true;\n\t\t\t\t},\n\t\t\t});\n\t\t\tmodal = getModalNode(document.body);\n\t\t});\n\n\t\tit('adds the large class', () => {\n\t\t\texpect(modal.className).to.include('slds-modal--large');\n\t\t});\n\n\t\tit('adds custom classname from modal container prop', () => {\n\t\t\texpect(modal.firstChild.className).to.include('my-custom-class');\n\t\t});\n\n\t\tit('renders correct assistive text/title for close button', () => {\n\t\t\tconst closeBtn = modal.querySelector('.slds-modal__close');\n\t\t\texpect(closeBtn.title).to.equal('Exit');\n\t\t});\n\n\t\tit('calls onRequestClose', () => {\n\t\t\tconst closeBtn = modal.querySelector('.slds-modal__close');\n\t\t\texpect(closed).to.be.false;\n\t\t\tSimulate.click(closeBtn, {});\n\t\t\texpect(closed).to.be.true;\n\t\t});\n\t});\n\n\tdescribe('Proper HTML markup', () => {\n\t\tit('dismissible modal has role=dialog', () => {\n\t\t\tconst cmp = getModal({\n\t\t\t\tisOpen: true,\n\t\t\t});\n\t\t\tconst modal = getModalNode(document.body);\n\t\t\tconst role = modal.getAttribute('role');\n\t\t\texpect(role).to.equal('dialog');\n\t\t});\n\n\t\tit('non-dismissible modal has role=alertdialog', () => {\n\t\t\tconst cmp = getModal({\n\t\t\t\tisOpen: true,\n\t\t\t\tdismissible: false,\n\t\t\t});\n\t\t\tconst modal = getModalNode(document.body);\n\t\t\tconst role = modal.getAttribute('role');\n\t\t\texpect(role).to.equal('alertdialog');\n\t\t});\n\t});\n\n\tdescribe('Open with custom header and header className', () => {\n\t\tlet modal;\n\n\t\tbeforeEach(() => {\n\t\t\tgetModal({\n\t\t\t\theader: <div id=\"art-vandelay\">Art vandelay</div>,\n\t\t\t\theaderClassName: 'art-vandelay',\n\t\t\t\tisOpen: true,\n\t\t\t});\n\t\t\tmodal = getModalNode(document.body);\n\t\t});\n\n\t\tit('adds the header', () => {\n\t\t\tconst customHeader = modal.querySelector('#art-vandelay');\n\t\t\texpect(customHeader).to.not.be.null;\n\t\t});\n\n\t\tit('adds the custom header class', () => {\n\t\t\texpect(modal.querySelector('.slds-modal__header').className).to.include(\n\t\t\t\t'art-vandelay'\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('Open with Prompt and Footer', () => {\n\t\tlet modal;\n\n\t\tbeforeEach(() => {\n\t\t\tconst feet = <div className=\"toes\">Toes</div>;\n\t\t\tgetModal({\n\t\t\t\tisOpen: true,\n\t\t\t\tprompt: 'warning',\n\t\t\t\ttitle: 'are you sure?',\n\t\t\t\tfooter: feet,\n\t\t\t});\n\t\t\tmodal = getModalNode(document.body);\n\t\t});\n\n\t\tit('adds the footer', () => {\n\t\t\tconst footer = modal.querySelector('.slds-modal__footer');\n\t\t\texpect(footer.className).to.include('slds-theme--default');\n\t\t});\n\n\t\tit('adds the prompt class', () => {\n\t\t\texpect(modal.className).to.include('slds-modal--prompt');\n\t\t});\n\n\t\tit('adds the prompt theme class', () => {\n\t\t\texpect(modal.querySelector('.slds-modal__header').className).to.include(\n\t\t\t\t'slds-theme--warning'\n\t\t\t);\n\t\t});\n\n\t\tit('adds the footer html content', () => {\n\t\t\texpect(modal.querySelector('.toes').innerHTML).to.equal('Toes');\n\t\t});\n\t});\n\n\tdescribe('Open Directional', () => {\n\t\tlet modal;\n\n\t\tbeforeEach(() => {\n\t\t\tconst feet = [\n\t\t\t\t<div className=\"toes\">Toe 1</div>,\n\t\t\t\t<div className=\"toes\">Toe 2</div>,\n\t\t\t];\n\t\t\tgetModal({\n\t\t\t\tisOpen: true,\n\t\t\t\tdirectional: true,\n\t\t\t\tfooter: feet,\n\t\t\t});\n\t\t\tmodal = getModalNode(document.body);\n\t\t});\n\n\t\tit('adds the footer', () => {\n\t\t\tconst footer = modal.querySelector('.slds-modal__footer--directional');\n\t\t\texpect(footer.className).to.include('slds-modal__footer');\n\t\t});\n\t});\n\n\tdescribe('Keyboard behavior', () => {\n\t\tlet modal;\n\n\t\tbeforeEach(() => {\n\t\t\tconst feet = [\n\t\t\t\t<button className=\"cancel\">Cancel</button>,\n\t\t\t\t<button className=\"save\">Save</button>,\n\t\t\t];\n\t\t\tgetModal({\n\t\t\t\tisOpen: true,\n\t\t\t\tdirectional: true,\n\t\t\t\tfooter: feet,\n\t\t\t});\n\t\t\tmodal = getModalNode(document.body);\n\t\t});\n\n\t\tit('first tab focuses close button', () => {\n\t\t\t// There an issue with this test, functionality works fine.\n\t\t\t// setTimeout(() => {\n\t\t\t// \tSimulate.keyDown(modal, {\n\t\t\t// \t\tkey: 'Tab',\n\t\t\t// \t\tkeyCode: 9,\n\t\t\t// \t\twhich: 9,\n\t\t\t// \t});\n\t\t\t// \tsetTimeout(() => {\n\t\t\t// \t\texpect(document.activeElement.className).to.include(\n\t\t\t// \t\t\t'slds-modal__close'\n\t\t\t// \t\t);\n\t\t\t// \t\tdone();\n\t\t\t// \t}, 200);\n\t\t\t// }, 200);\n\t\t});\n\n\t\tit('enter on close button works', () => {\n\t\t\t// TODO: simulate enter on close button and modal is undefined\n\t\t});\n\n\t\tit('traps focus inside Modal', () => {\n\t\t\t// TODO: simulate tabbing around inside of Modal\n\t\t});\n\t});\n});\n"],"file":"modal.browser-test.js"}